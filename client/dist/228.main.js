(self.webpackChunkmy_webpack_project=self.webpackChunkmy_webpack_project||[]).push([[228],{8767:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(5466);class i extends s.Component{constructor(e){super(e),this.state={stars:[0,0,0,0,0]}}componentDidMount(){this.renderStarsByQuarters(this.props.rating)}componentDidUpdate(e){this.props.rating!==e.rating&&this.renderStarsByQuarters(this.props.rating)}renderStarsByQuarters(e){if(isNaN(e)||!e)this.setState({stars:[0,0,0,0,0]});else if(e>0){for(var[t,a]=[Number(String(e).split(".")[0]),Number("0."+String(e).split(".")[1])||0],s=0,i=[0,0,0,0,0];t>0;)i[s]=1,t--,5===++s&&s--;i[s]=a>0&&a<=.125?0:a>.125&&a<=.375?.35:a>.375&&a<=.625?.5:a>.625&&a<=.875?.7:0===a&&5!==e?0:1,this.setState({stars:i})}}render(){return s.createElement("div",{className:"five-stars"},this.state.stars.map(((e,t)=>s.createElement("div",{className:"single-star-container",id:t,key:t},s.createElement("span",{className:"single-star-outline"}),s.createElement("span",{className:"single-star-fill",style:{width:100*e+"%"}})))))}}const r=i},9228:(t,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>O});var i=s(7057);const r=({setIsOpen:e,imgSrc:t})=>React.createElement(React.Fragment,null,React.createElement("div",{onClick:()=>e(!1)}),React.createElement("div",{className:"modal_centered"},React.createElement("div",{className:"modal"},React.createElement("img",{className:"review_photo_modal",alt:"an exapnded image uploaded by the reviewer",src:t}),React.createElement("button",{className:"modal_closeBtn",onClick:()=>e(!1,null)},React.createElement(i.eSQ,{style:{marginBottom:"-3px"}})))));var l=s(8767),n=s(4559),c=s.n(n),o=s(6120),h=s(6278);class d extends React.Component{constructor(e){super(e),this.state={bodyTextLength:250,expanded:!1,isOpen:!1,helpfulness:e.review.helpfulness,isYesClicked:!1,isReported:!1,imgSrc:null},this.changeDateFormat=this.changeDateFormat.bind(this),this.setIsOpen=this.setIsOpen.bind(this),this.handleIncreaseCounts=this.handleIncreaseCounts.bind(this),this.show=this.show.bind(this)}componentDidUpdate(){this.state.isOpen?document.body.style.overflow="hidden":document.body.style.overflow="unset"}changeDateFormat(e){var t=new Date(e);return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+(t.getDate()+1).toString()+", "+t.getFullYear().toString()}setIsOpen(e,t){this.setState({isOpen:e,imgSrc:t})}handleIncreaseCounts(e,t){"Yes"===e.target.innerText?(this.setState({isYesClicked:!0,helpfulness:this.state.helpfulness+1}),c().put(`/reviews/${t}/helpful`).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))):(this.setState({isReported:!0}),c().put(`/reviews/${t}/report`).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))),this.props.interaction(e.target)}show(){this.state.bodyTextLength===this.props.review.body.length?this.setState({bodyTextLength:250,expanded:!1}):this.state.bodyTextLength<this.props.review.body.length&&this.setState({bodyTextLength:this.props.review.body.length,expanded:!0})}render(){return React.createElement("div",{className:"tile"},React.createElement("div",null,React.createElement(l.Z,{rating:this.props.review.rating})),React.createElement("div",null,React.createElement("strong",null,this.props.review.summary)),React.createElement("div",{className:"tile-user"},this.changeDateFormat(this.props.review.date),", ",this.props.review.reviewer_name),React.createElement("div",null,this.props.review.body.slice(0,this.state.bodyTextLength)),React.createElement("div",null,this.props.review.body.length<this.state.bodyTextLength?React.createElement("div",null):React.createElement("p",null,React.createElement("a",{className:"show_more",onClick:this.show},this.state.expanded?React.createElement("span",null,"Show less"):React.createElement("span",null,"Show more")))),React.createElement("div",null,this.props.review.photos.map((e=>{console.log("testing review photos map");const t=e.url.split("/"),a=t.pop(),s=t[3],i=e.url.includes("cloudinary");return console.log("true or false",i),i?React.createElement("a",{key:e.id},React.createElement("div",{className:"review_photo",width:"70px",height:"50px",onClick:()=>{this.setIsOpen(!0,e.url)}},React.createElement(h.Ee,{cloudName:s,publicId:a,width:"70",height:"50",alt:"an image uploaded by the reviewer"},React.createElement(h.zA,{width:"70",height:"50",crop:"fill",alt:"an image uploaded by the reviewer"})))):React.createElement("a",{key:e.id},React.createElement("div",{className:"review_photo",width:"70px",height:"50px",onClick:()=>{this.setIsOpen(!0,e.url)}},React.createElement("img",{className:"review_photo",width:"70px",height:"50px",alt:"an image uploaded by the reviewer",src:e.url})))}))),!0===this.props.review.recommend?React.createElement("div",{className:"review_recommend"},React.createElement("i",{className:"fa-solid fa-check"}),React.createElement("p",{className:"review_recommend"},"I recommend this product")):null,null==this.props.review.reponse?React.createElement("div",null):React.createElement("div",{className:"review_response"},React.createElement("strong",null,"Response"),React.createElement("div",null,this.props.review.reponse)),React.createElement("div",null,React.createElement("p",null,"Helpful?",React.createElement("button",{className:"review_yes_button",disabled:this.state.isYesClicked,onClick:e=>{this.handleIncreaseCounts(e,this.props.review.review_id)}},"Yes"),"(",this.state.helpfulness,") |",React.createElement("button",{className:"review_report_button",disabled:this.state.isReported,onClick:e=>{this.handleIncreaseCounts(e,this.props.review.review_id)}},"Report"))),React.createElement("div",null,React.createElement("hr",null)),this.state.isOpen?React.createElement(r,{setIsOpen:this.setIsOpen,imgSrc:this.state.imgSrc}):null)}}const m=(0,o.Z)(d,"ratings_and_reviews");var p=s(5466),v=s(3585);const u=({click:e})=>{const[t,a]=(0,p.useState)(null),[s,i]=(0,p.useState)(null);return p.createElement("div",null,[...Array(5)].map(((r,l)=>{const n=l+1;return p.createElement("label",{key:n},p.createElement("input",{type:"radio",name:"rating",className:"rating",value:n,onClick:t=>{a(n),e(t,n)}}),p.createElement(v.QJe,{className:"star",size:25,onMouseEnter:()=>i(n),onMouseLeave:()=>i(null),color:n<=(s||t)?"#ffc107":"#e4e5e9"}))})))};var g=s(2401),w=s.n(g);const R=s(2319);class f extends p.Component{constructor(e){super(e),this.state={productId:parseInt(this.props.productId),productName:this.props.currentProduct.name,starRating:1,recommend:!0,characteristics:{},reviewSummary:"",reviewBody:"",reviewBodyCount:50,photos:[],assets:[],nickname:"",email:""},this.closeModal=this.closeModal.bind(this),this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.uploadImage=this.uploadImage.bind(this),this.handleClick=this.handleClick.bind(this)}componentDidUpdate(e){this.props.productId!==e.productId&&thise.setState({productId:this.props.productId,productName:this.props.currentProduct.name,starRating:"",recommend:"",characteristics:{},reviewSummary:"",reviewBody:"",photos:[],assets:[],nickname:"",email:""})}closeModal(){this.props.handleClick("closed")}handleChange(e){if(e.preventDefault(),"review_summary"===e.target.className)this.setState({reviewSummary:e.target.value});else if("review_body"===e.target.className){let t=50-e.target.value.length;this.setState({reviewBody:e.target.value,reviewBodyCount:t})}else"review_name"===e.target.className?this.setState({nickname:e.target.value}):"review_email"===e.target.className&&this.setState({email:e.target.value})}handleClick(e,t){if(console.log(e),"rating"===e.target.className)this.setState({starRating:t},(()=>{console.log(this.state.starRating)}));else if("yes"===e.target.id||"no"===e.target.id){console.log("hello, this is a test");let t="yes"===e.target.value;this.setState({recommend:t},(()=>{console.log(this.state.recommend)}))}else if("characteristic_rating"===e.target.className){let t=e.target.id,a=e.target.value;this.state.characteristics[t]=parseInt(a),this.setState({characteristics:this.state.characteristics},(()=>{console.log(this.state.characteristics)}))}this.props.interaction(e.target)}uploadImage(e){console.log(e);const t=new FormData;t.append("file",e[0]),t.append("upload_preset",`${w().cloudinary_preset}`),c().post("https://api.cloudinary.com/v1_1/dwcubhwiw/image/upload",t).then((e=>{let t=e.data.url;this.state.photos.push(t),this.state.assets.push(e.data),console.log("response data",e),console.log(this.state.photos),this.setState({photos:this.state.photos,assets:this.state.assets})})).catch((e=>{console.error(e)}))}handleSubmit(t){t.preventDefault();var a={product_id:this.state.productId,rating:this.state.starRating,summary:this.state.reviewSummary,body:this.state.reviewBody,recommend:this.state.recommend,name:this.state.nickname,email:this.state.email,photos:this.state.photos,characteristics:this.state.characteristics};console.log(a),c().post("/reviews",a).then((e=>{console.log(e),this.closeModal()})).catch((e=>{console.error(e)})),this.props.interaction(e.target)}render(){return p.createElement("div",{className:"darkBG"},p.createElement("div",{className:"modal_centered"},p.createElement("div",{className:"modal_new_review"},p.createElement("button",{className:"modal_closeBtn",onClick:()=>this.closeModal()},p.createElement(i.eSQ,{style:{marginBottom:"-3px"}})),p.createElement("h2",{className:"review_form_header"},"Write Your Review"),p.createElement("h3",{className:"review_form_sub_header"},"About ",this.state.productName),p.createElement("form",{className:"new_review_form",onSubmit:this.handleSubmit},p.createElement("label",{className:"review_form_label"},p.createElement("h4",{className:"review_form_label_text"},"Overall Rating"),p.createElement(u,{click:this.handleClick})),p.createElement("label",{className:"review_form_label"},p.createElement("fieldset",{className:"rf_fieldset"},p.createElement("legend",{className:"rf_legend_header"},"Recommend"),p.createElement("div",null,p.createElement("div",null,p.createElement("input",{type:"radio",id:"yes",name:"input",value:"yes",onClick:this.handleClick}),p.createElement("label",{htmlFor:"yes"},"Yes")),p.createElement("div",null,p.createElement("input",{type:"radio",id:"no",name:"input",value:"no",onClick:this.handleClick}),p.createElement("label",{htmlFor:"no"},"No"))))),p.createElement("label",{className:"review_form_label"},Object.entries(this.props.reviewsMeta.characteristics).map((([e,t])=>p.createElement("fieldset",{className:"rf_fieldset_characteristics",key:t.id},p.createElement("legend",{className:"rf_legend_header"},e),p.createElement("div",{className:"characteristics_review_form"},p.createElement("div",null,p.createElement("input",{type:"radio",id:t.id,name:e,value:1,className:"characteristic_rating",onClick:this.handleClick}),p.createElement("label",{htmlFor:t.id},"1"),p.createElement("div",{className:"characteristic_meaning"},R.characteristics[e][1])),p.createElement("div",null,p.createElement("input",{type:"radio",id:t.id,name:e,value:2,className:"characteristic_rating",onClick:this.handleClick}),p.createElement("label",{htmlFor:t.id},"2"),p.createElement("div",{className:"characteristic_meaning"},R.characteristics[e][2])),p.createElement("div",null,p.createElement("input",{type:"radio",id:t.id,name:e,value:3,className:"characteristic_rating",onClick:this.handleClick}),p.createElement("label",{htmlFor:t.id},"3"),p.createElement("div",{className:"characteristic_meaning"},R.characteristics[e][3])),p.createElement("div",null,p.createElement("input",{type:"radio",id:t.id,name:e,value:4,className:"characteristic_rating",onClick:this.handleClick}),p.createElement("label",{htmlFor:t.id},"4"),p.createElement("div",{className:"characteristic_meaning"},R.characteristics[e][4])),p.createElement("div",null,p.createElement("input",{type:"radio",id:t.id,name:e,value:5,className:"characteristic_rating",onClick:this.handleClick}),p.createElement("label",{htmlFor:t.id},"5"),p.createElement("div",{className:"characteristic_meaning"},R.characteristics[e][5])))))),p.createElement("label",{className:"review_form_label"},p.createElement("fieldset",null,p.createElement("legend",{className:"rf_header"},"Photos"),p.createElement("div",{className:"rf_photos"},this.state.assets.length<5?p.createElement("div",null,p.createElement("input",{type:"file",className:"photos",onChange:e=>{this.uploadImage(e.target.files)}})):null,this.state.assets.map((e=>p.createElement("div",{className:"review_photo",key:e.asset_id},p.createElement("img",{className:"review_photo",alt:"review photo",src:e.url})))))))),p.createElement("label",{className:"review_form_label"},p.createElement("h4",{className:"rf_header"},"Add a headline"),p.createElement("input",{type:"text",value:this.state.reviewSummary,className:"review_summary",required:!0,maxLength:"60",placeholder:"Example: Best purchase ever!",onChange:this.handleChange})),p.createElement("label",{className:"review_form_label"},p.createElement("h4",{className:"rf_header"},"Add a written review"),p.createElement("textarea",{value:this.state.reviewBody,onKeyDown:this.__handleKeyDown,className:"review_body",required:!0,minLength:"50",maxLength:"1000",placeholder:"Why did you like the product or not?",onChange:this.handleChange}),this.state.reviewBodyCount>0?p.createElement("div",null,"Minimum required characters left: [",this.state.reviewBodyCount,"]"):p.createElement("div",null,"Minimum reached")),p.createElement("label",{className:"review_form_label"},p.createElement("h4",{className:"rf_header"},"Choose your nickname"),p.createElement("input",{type:"text",value:this.state.nickname,className:"review_name",required:!0,maxLength:"60",placeholder:"Example: jackson11!",onChange:this.handleChange}),p.createElement("div",null,"For privacy reasons, do not use your full name or email address")),p.createElement("label",{className:"review_form_label"},p.createElement("h4",{className:"rf_header"},"Email"),p.createElement("input",{type:"email",value:this.state.email,className:"review_email",required:!0,maxLength:"60",placeholder:"Example: jackson11@email.com",onChange:this.handleChange}),p.createElement("div",null,"For authentication reasons, you will not be emailed")),p.createElement("input",{className:"review_form_submit",type:"submit",value:"Submit"})))))}}const E=(0,o.Z)(f,"ratings_and_reviews");class _ extends p.Component{constructor(e){super(e),this.state={value:""},this.handleChange=this.handleChange.bind(this)}handleChange(e){this.setState({value:e.target.value},(()=>{""===this.state.value?this.props.search(null):this.props.search(this.state.value)}))}render(){return p.createElement("div",{className:"search_container_reviews"},p.createElement("input",{type:"text",className:"search_input_reviews",value:this.state.value,placeholder:"Search Reviews",onChange:this.handleChange}),p.createElement("i",{className:"fa-solid fa-magnifying-glass search_icon_reviews"}))}}const y=_;class b extends React.Component{constructor(e){super(e),this.state={productId:this.props.productId,limitReached:!1,sortOption:"relevance",reviews:this.props.reviews,modalOpen:!1,searchedTerm:null,sortedReviews:[],tiles:2},this.handleClick=this.handleClick.bind(this),this.sort=this.sort.bind(this),this.search=this.search.bind(this)}search(e){if(null===e&&null!==this.state.searchedTerm)console.log("testing 1 2 3"),0===this.state.sortedReviews.length?this.setState({productId:this.props.productId,limitReached:!1,reviews:this.props.reviews,sortOption:this.state.sortOption,searchedTerm:e,tiles:2},(()=>{console.log("new reviews")})):this.setState({productId:this.props.productId,limitReached:!1,reviews:this.state.sortedReviews,sortOption:this.state.sortOption,searchedTerm:e,tiles:2},(()=>{console.log("new reviews")}));else if(null!==e){let t=this.state.reviews.filter((t=>t.body.toLowerCase().includes(e.toLowerCase())||t.summary.toLowerCase().includes(e.toLowerCase())||t.reviewer_name.toLowerCase().includes(e.toLowerCase())?t:void 0));console.log(t),this.setState({productId:this.props.productId,limitReached:!1,reviews:t,searchedTerm:e,tiles:2},(()=>{console.log("new reviews")}))}else this.setState({searchedTerm:e},(()=>{console.log("testing search")}))}componentDidUpdate(e){if(e.productId!==this.props.productId)this.setState({productId:this.props.productId,limitReached:!1,sortOption:"relevance",reviews:this.props.reviews,tiles:2});else if(e.totalReviews!==this.props.totalReviews){console.log(this.props.reviews),console.log(this.state.reviews),console.log(this.props.filteredReviewRatings);let e=this.props.filteredReviewRatings,i=[],r=[];for(var t=0;t<e.length;t++)1===e[t]&&i.push(t+1);if(0===i.length)this.setState({productId:this.props.productId,limitReached:!1,sortOption:"relevance",reviews:this.props.reviews,tiles:2});else{console.log("test 1 2 3");for(var a=0;a<this.props.reviews.length;a++)for(var s=0;s<i.length;s++)i[s]===this.props.reviews[a].rating&&r.push(this.props.reviews[a]);this.setState({productId:this.props.productId,limitReached:!1,reviews:r,tiles:2})}}}handleClick(e){"closed"===e?this.setState({modalOpen:!1}):(e.preventDefault(),"add_review"===e.target.className?this.setState({modalOpen:!0}):this.setState({tiles:this.state.tiles+=2},(()=>{this.state.tiles>=this.props.totalReviews&&(console.log("limit reached"),this.setState({limitReached:!0}))})),this.props.interaction(e.target))}sort(e){var t=e;if(t===this.state.sortOption)return null;c().get(`/reviews/${this.state.productId}/500/${t}`).then((e=>{if(this.props.filteredReviewRatings.includes(1)){let r=this.props.filteredReviewRatings,l=[],n=[];for(var a=0;a<r.length;a++)1===r[a]&&l.push(a+1);for(var s=0;s<e.data.results.length;s++)for(var i=0;i<l.length;i++)l[i]===e.data.results[s].rating&&n.push(e.data.results[s]);this.setState({reviews:n,sortedReviews:n,sortOption:t,limitReached:!1,tiles:2})}else this.setState({reviews:e.data.results,sortedReviews:e.data.results,sortOption:t,limitReached:!1,tiles:2})})).catch((e=>{console.error(e)}))}render(){return this.state.limitReached||this.props.totalReviews>0&&this.props.totalReviews<=2?React.createElement("div",{className:"reviews_list"},React.createElement(y,{search:this.search}),React.createElement("div",{className:"sort_options"},React.createElement("strong",null,this.props.totalReviews," reviews, sorted by"),React.createElement("select",{id:"review_list_select",value:this.state.sortOption,onChange:e=>{this.sort(e,!1)}},React.createElement("option",{value:"relevance"},"relevance"),React.createElement("option",{value:"newest"},"newest"),React.createElement("option",{value:"helpful"},"helpful"))),React.createElement("div",{className:"reviews"+(this.state.tiles>4?"_expand_mode":"")},React.createElement("div",null,this.state.reviews.slice(0,this.state.tiles).map((e=>React.createElement(m,{review:e,key:e.review_id})))),this.state.modalOpen?React.createElement(E,{handleClick:this.handleClick,productId:this.props.productId,currentProduct:this.props.currentProduct,reviewsMeta:this.props.reviewsMeta}):React.createElement("div",null),React.createElement("button",{onClick:this.handleClick,"data-testid":"add_review_button",className:"add_review"},"Add Review"))):React.createElement("div",{className:"reviews_list"},React.createElement(y,{search:this.search}),React.createElement("div",{className:"sort_options"},React.createElement("strong",null,this.props.totalReviews," reviews, sorted by"),React.createElement("select",{id:"review_list_select",value:this.state.sortOption,onChange:e=>{this.sort(e.target.value)}},React.createElement("option",{value:"relevance"},"relevance"),React.createElement("option",{value:"newest"},"newest"),React.createElement("option",{value:"helpful"},"helpful"))),React.createElement("div",{className:"reviews"+(this.state.tiles>4?"_expand_mode":"")},React.createElement("div",{"data-testid":"tiles"},this.state.reviews.slice(0,this.state.tiles).map((e=>React.createElement(m,{review:e,key:e.review_id}))))),this.state.modalOpen?React.createElement(E,{handleClick:this.handleClick,productId:this.props.productId,currentProduct:this.props.currentProduct,reviewsMeta:this.props.reviewsMeta}):React.createElement("div",null),React.createElement("button",{onClick:this.handleClick,"data-testid":"more_button",className:"more_reviews"},"More Reviews"),React.createElement("button",{onClick:this.handleClick,"data-testid":"add_review_button",className:"add_review"},"Add Review"))}}const N=(0,o.Z)(b,"ratings_and_reviews"),k=s(2319),S=e=>`${(e/5*100).toFixed(2)}%`,C=({reviewsMeta:e})=>React.createElement("div",{id:"characteristics"},Object.entries(e.characteristics).map((([e,t])=>React.createElement("div",{id:"characteristic",key:t.id},React.createElement("div",{id:"characteristic_name"},e),React.createElement("div",{className:"guages"},React.createElement("div",{className:"characteristic_guage_1"},React.createElement("div",{className:"bar_1",style:parseInt(t.value)<1?{width:`${S(t.value)}`}:{width:"0%"}},parseInt(t.value)<1?React.createElement("div",{className:"arrow"}):React.createElement("div",null))),React.createElement("div",{className:"breakdown_1"},k.characteristics[e][1]),React.createElement("div",{className:"characteristic_guage_2"},React.createElement("div",{className:"bar_2",style:parseInt(t.value)<2&&parseInt(t.value)>.99?{width:`${S(t.value)}`}:{width:"0%"}},parseInt(t.value)<2&&parseInt(t.value)>.99?React.createElement("div",{className:"arrow"}):React.createElement("div",null))),React.createElement("div",{className:"breakdown_2"},k.characteristics[e][2]),React.createElement("div",{className:"characteristic_guage_3"},React.createElement("div",{className:"bar_3",style:parseInt(t.value)<3&&parseInt(t.value)>1.99?{width:`${S(t.value)}`}:{width:"0%"}},parseInt(t.value)<3&&parseInt(t.value)>1.99?React.createElement("div",{className:"arrow"}):React.createElement("div",null))),React.createElement("div",{className:"breakdown_3"},k.characteristics[e][3]),React.createElement("div",{className:"characteristic_guage_4"},React.createElement("div",{className:"bar_4",style:parseInt(t.value)<4&&parseInt(t.value)>2.99?{width:`${S(t.value)}`}:{width:"0%"}},parseInt(t.value)<4&&parseInt(t.value)>2.99?React.createElement("div",{className:"arrow"}):React.createElement("div",null))),React.createElement("div",{className:"breakdown_4"},k.characteristics[e][4]),React.createElement("div",{className:"characteristic_guage_5"},React.createElement("div",{className:"bar_5",style:parseInt(t.value)<=5&&parseInt(t.value)>3.99?{width:`${S(t.value)}`}:{width:"0%"}},parseInt(t.value)<=5&&parseInt(t.value)>3.99?React.createElement("div",{className:"arrow"}):React.createElement("div",null))),React.createElement("div",{className:"breakdown_5"},k.characteristics[e][5]))))));class I extends React.Component{constructor(e){super(e),this.state={fiveStarReviews:this.percentageOfTotalReviews(this.props.totalRatings,this.props.ratings[5]),fourStarReviews:this.percentageOfTotalReviews(this.props.totalRatings,this.props.ratings[4]),threeStarReviews:this.percentageOfTotalReviews(this.props.totalRatings,this.props.ratings[3]),twoStarReviews:this.percentageOfTotalReviews(this.props.totalRatings,this.props.ratings[2]),oneStarReviews:this.percentageOfTotalReviews(this.props.totalRatings,this.props.ratings[1]),recommendationPercentage:this.recommendationPercentage(this.props.reviews),isToggled:[0,0,0,0,0],messages:[]},this.recommendationPercentage=this.recommendationPercentage.bind(this),this.percentageOfTotalReviews=this.percentageOfTotalReviews.bind(this),this.filterNotification=this.filterNotification.bind(this)}componentDidUpdate(e){this.props.productId!==e.productId&&this.setState({fiveStarReviews:this.percentageOfTotalReviews(this.props.totalRatings,this.props.ratings[5]),fourStarReviews:this.percentageOfTotalReviews(this.props.totalRatings,this.props.ratings[4]),threeStarReviews:this.percentageOfTotalReviews(this.props.totalRatings,this.props.ratings[3]),twoStarReviews:this.percentageOfTotalReviews(this.props.totalRatings,this.props.ratings[2]),oneStarReviews:this.percentageOfTotalReviews(this.props.totalRatings,this.props.ratings[1]),recommendationPercentage:this.recommendationPercentage(this.props.reviews),isToggled:[0,0,0,0,0],messages:[]})}recommendationPercentage(e){let t=0,a=e.length;return e.filter((e=>{!0===e.recommend&&t++})),100*parseFloat(t/a).toFixed(2)+"%"}percentageOfTotalReviews(e,t){return 100*parseFloat(t/e).toFixed(2)+"%"}filterNotification(e){const t=parseInt(e.target.innerText[0]);var a=[];1===this.state.isToggled[t-1]?this.state.isToggled[t-1]=0:this.state.isToggled[t-1]=1;for(var s=this.state.isToggled.length-1;s>-1;s--)1===this.state.isToggled[s]&&a.push(`${s+1} stars`);this.setState({messages:a},(()=>{console.log(this.state.messages)})),this.props.interaction(e.target)}clearMessages(){this.setState({isToggled:[0,0,0,0,0],messages:[]})}render(){return React.createElement("div",{className:"ratings_breakdown"},React.createElement("strong",null,"Ratings and Reviews"),React.createElement("div",{"data-testid":"star_rating",className:"star_rating"},React.createElement("div",{className:"star_rating_text"},this.props.rating),React.createElement("div",{className:"star_output"},React.createElement(l.Z,{rating:this.props.rating}))),React.createElement("div",null,"Total Ratings: ",this.props.totalRatings),React.createElement("div",null,this.state.recommendationPercentage," of reviews recommend this product"),React.createElement("div",{className:"filter_ratings_message"},this.state.messages.length>0?React.createElement("div",null,"Filtered By: "):React.createElement("div",null),this.state.messages.map(((e,t)=>React.createElement("div",{key:t},e)))),this.state.messages.length>0?React.createElement("div",null,React.createElement("button",{onClick:()=>{this.props.clearFilter(),this.clearMessages()}},"Clear Filter")):React.createElement("div",null),React.createElement("div",{className:"progress_bars"},React.createElement("div",null,React.createElement("a",{className:"five_star_ratings_bar",style:{float:"left"},onClick:e=>{this.props.filterReviews(e),this.filterNotification(e)}},"5 Stars"),React.createElement("div",{className:"progress"},React.createElement("div",{className:"bar",style:{width:`${this.state.fiveStarReviews}`}})),React.createElement("div",{style:{float:"left"}},this.props.ratings[5])),React.createElement("div",null,React.createElement("a",{className:"four_star_ratings_bar",style:{float:"left"},onClick:e=>{this.props.filterReviews(e),this.filterNotification(e)}},"4 Stars"),React.createElement("div",{className:"progress"},React.createElement("div",{className:"bar",style:{width:`${this.state.fourStarReviews}`}})),React.createElement("div",{style:{float:"left"}},this.props.ratings[4])),React.createElement("div",null,React.createElement("a",{className:"three_star_ratings_bar",style:{float:"left"},onClick:e=>{this.props.filterReviews(e),this.filterNotification(e)}},"3 Stars"),React.createElement("div",{className:"progress"},React.createElement("div",{className:"bar",style:{width:`${"NaN%"===this.state.threeStarReviews?"0%":this.state.threeStarReviews}`}})),React.createElement("div",{style:{float:"left"}},this.props.ratings[3])),React.createElement("div",null,React.createElement("a",{className:"two_star_ratings_bar",style:{float:"left"},onClick:e=>{this.props.filterReviews(e),this.filterNotification(e)}},"2 Stars"),React.createElement("div",{className:"progress"},React.createElement("div",{className:"bar",style:{width:`${this.state.twoStarReviews}`}})),React.createElement("div",{style:{float:"left"}},this.props.ratings[2])),React.createElement("div",null,React.createElement("a",{className:"one_star_ratings_bar",style:{float:"left"},onClick:e=>{this.props.filterReviews(e),this.filterNotification(e)}},"1 Stars"),React.createElement("div",{className:"progress"},React.createElement("div",{className:"bar",style:{width:`${this.state.oneStarReviews}`}})),React.createElement("div",{style:{float:"left"}},this.props.ratings[1]))),React.createElement(C,{reviewsMeta:this.props.reviewsMeta}))}}const T=(0,o.Z)(I,"ratings_and_reviews");class x extends React.Component{constructor(e){super(e),this.state={filteredReviews:[],isToggled:[0,0,0,0,0],ratings:this.props.reviewsMeta.ratings},this.clearFilter=this.clearFilter.bind(this),this.filterReviews=this.filterReviews.bind(this),this.search=this.search.bind(this)}search(e){this.setState({filteredReviews:e},(()=>{console.log("testing search under Ratings_Reviews")}))}componentDidUpdate(e){this.props.productId!==e.productId&&this.setState({filteredReviews:[],isToggled:[0,0,0,0,0],ratings:this.props.reviewsMeta.ratings})}clearFilter(){this.setState({filteredReviews:[],isToggled:[0,0,0,0,0]})}filterReviews(e){const t=parseInt(e.target.innerText[0]);let a=this.props.reviews.filter((e=>{if(e.rating===t)return e}));1===this.state.isToggled[t-1]?(a=this.state.filteredReviews.filter((e=>{if(e.rating!==t)return e})),this.state.isToggled[t-1]=0,this.setState({filteredReviews:a},(()=>{console.log(this.state.filteredReviews)}))):this.state.filteredReviews.length>0?(a=this.state.filteredReviews.concat(a),this.state.isToggled[t-1]=1,this.setState({filteredReviews:a},(()=>{console.log(this.state.filteredReviews)}))):(this.state.isToggled[t-1]=1,this.setState({filteredReviews:a},(()=>{console.log(this.state.filteredReviews)}))),this.props.interaction(e.target)}render(){return console.log("this is a test for ratings",this.state.ratings),React.createElement("div",{id:"review_container"},React.createElement(T,{productId:this.props.productId,rating:this.props.rating,reviews:this.props.reviews,ratings:this.state.ratings,totalReviews:this.props.totalReviews,totalRatings:this.props.totalRatings,filterReviews:this.filterReviews,clearFilter:this.clearFilter,reviewsMeta:this.props.reviewsMeta}),React.createElement(N,{search:this.search,productId:this.props.productId,reviews:this.state.filteredReviews.length>0?this.state.filteredReviews:this.props.reviews,totalReviews:this.state.filteredReviews.length>0?this.state.filteredReviews.length:this.props.totalReviews,currentProduct:this.props.currentProduct,reviewsMeta:this.props.reviewsMeta,filteredReviewRatings:this.state.isToggled}))}}const O=(0,o.Z)(x,"ratings_and_reviews")},2401:e=>{e.exports={cloudinary_preset:"oekwzkmj"}},6120:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(5466),i=a(4559),r=a.n(i);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},l.apply(this,arguments)}const n=(e,t)=>{class a extends s.Component{constructor(e){super(e)}interactionFunc(e){var a=e.id?e.nodeName+"#"+e.id:e.nodeName+"."+e.className,s=String(new Date);r().post("/interactions",{element:a,widget:t,time:s}).then((e=>{201===e.status&&console.log(e.data)})).catch((e=>{console.error(e)}))}render(){return s.createElement(e,l({},this.props,{interaction:this.interactionFunc.bind(this)}))}}return a}},2319:e=>{"use strict";e.exports=JSON.parse('{"reviewsMeta":{"product_id":"71697","ratings":{"1":"19","2":"19","3":"35","4":"29","5":"76"},"recommended":{"false":"44","true":"134"},"characteristics":{"Fit":{"id":240582,"value":"3.3862068965517241"},"Length":{"id":240583,"value":"3.2638888888888889"},"Comfort":{"id":240584,"value":"3.4652777777777778"},"Quality":{"id":240585,"value":"3.6013986013986014"}}},"reviews":{"product":"71697","page":0,"count":500,"results":[{"review_id":1275253,"rating":5,"summary":"really like it ","recommend":true,"response":null,"body":"really like it really like it really like it really like it ","date":"2022-06-11T00:00:00.000Z","reviewer_name":"test","helpfulness":12,"photos":[]},{"review_id":1276912,"rating":1,"summary":"Test upload muti pictures","recommend":false,"response":null,"body":"Test upload pictures. Team application! lol --====","date":"2022-10-20T00:00:00.000Z","reviewer_name":"yuchen","helpfulness":10,"photos":[{"id":2456350,"url":"https://res.cloudinary.com/dskwqzkmr/image/upload/v1666280816/gydmwsspxa6fcbjqnt6f.jpg"},{"id":2456351,"url":"https://res.cloudinary.com/dskwqzkmr/image/upload/v1666280816/eg8accgaype9csfque0z.png"}]},{"review_id":1276251,"rating":4,"summary":"testing","recommend":true,"response":null,"body":"adding review body adding review body adding review body","date":"2022-08-29T00:00:00.000Z","reviewer_name":"gytest1","helpfulness":6,"photos":[{"id":2455861,"url":"https://res.cloudinary.com/lexicon-atelier/image/upload/v1661733999/nnoyb1vnnkrmn0t8gvmo.jpg"}]},{"review_id":1276007,"rating":3,"summary":"Test image upload","recommend":false,"response":null,"body":"jsfdkhfjksdhfjksadhfjksahfjkshfjksdfabfnashfjwhfiweufhwejffaksdhfjahfjdskafhjakfnbaksdhfjkahfjahfhjakhfjakhfjakhfjakhfjieuywihfjakhfjkabhnfjkahfjahfjkahfjkahfjkahfjiwuiefajkhfjkahfjiweuyfuadshfjakhfuewfhfjkahfiweuyisadhfiweqyusfhjsadhfiwuywuhfahfuwyiwoefwiofhsjdghfuwieyfwhfwjhfuiweyfwieohfwhyfuwefhwuihfwjfwpufwoiefwoiefiwieo","date":"2022-07-26T00:00:00.000Z","reviewer_name":"palatino","helpfulness":5,"photos":[{"id":2455734,"url":"https://i.ibb.co/xj0F8sb/a46ac165a3f7.webp"}]},{"review_id":1276190,"rating":4,"summary":"Pretty good!","recommend":true,"response":null,"body":"Does its job and does it well. Fits a little snug but outside that its great!","date":"2022-08-25T00:00:00.000Z","reviewer_name":"jeanie","helpfulness":5,"photos":[]},{"review_id":1276419,"rating":5,"summary":"Wahoo","recommend":true,"response":null,"body":"BEST PRODUCT EVER YOU MUST BUY THIS IT WILL MAKE YOU HAPPY","date":"2022-09-05T00:00:00.000Z","reviewer_name":"happyman","helpfulness":5,"photos":[{"id":2456024,"url":"http://res.cloudinary.com/dzblbll9t/image/upload/v1662417414/j4drcofxpdzdrbqd32p3.jpg"}]}]},"characteristics":{"Size":{"1":"A size too small","2":"½ a size too small","3":"Perfect","4":"½ a size too big","5":"A size too wide"},"Width":{"1":"Too narrow","2":"Slightly narrow","3":"Perfect","4":"Slightly wide","5":"Too wide"},"Comfort":{"1":"Uncomfortable","2":"Slightly uncomfortable","3":"Ok","4":"Comfortable","5":"Perfect"},"Quality":{"1":"Poor","2":"Below average","3":"What I expected","4":"Pretty great","5":"Perfect"},"Length":{"1":"Runs Short","2":"Runs slightly short","3":"Perfect","4":"Runs slightly long","5":"Runs long"},"Fit":{"1":"Runs tight","2":"Runs slightly tight","3":"Perfect","4":"Runs slightly long","5":"Runs long"}}}')}}]);